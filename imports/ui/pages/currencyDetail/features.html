<template name="features">
  <div class="modal fade" id="addFeatureModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Adding a new feature</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          You're adding a {{currencyName}} feature. You will be credited with a bounty of {{bountyamount}} ZZR in 7 days as long as it:
          <ul>
            <li>Maintains 3 or more stars</li>
            <li>Is not sent to the Sin Bin by a moderator</li>
          </ul>
          Here's an example feature from Monero:<br />
          <i>Privacy - all transactions made with Monero are private and untraceable.</i>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close">Thanks, don't show this again</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="wymiModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Commenting</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>You'll be asked how much <i>wymi</i> you want to give your comment. </p>
          <p>You must have enough avalable balance in your wallet to fund the amount you choose.</p>
          <p>If your comment becomes the <i>top comment</i> in the thread, you get <i>triple</i> your wymi back!
          If not, your wymi is <i>returned to you in full</i>. Comments sent to the Sin Bin for violating
          the rules shall forfeit their wymi.</p>
          <p>The wymi is currently optional but a minimum amount may be implimented in future depending on how much spam etc there is.</p>
          <h5>Rules</h5>
          If you think you're doing the right thing, you probably are.
          <ul>
            <li>No spamming</li>
            <li>No personal attacks or abuse</li>
            <li>Warning people about scams etc is perfectly fine, but <i>malicious</i> FUD is not.</li>
          </ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close">Close</button>
        </div>
      </div>
    </div>
  </div>

<div class="modal fade" id="featureModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add a new feature</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        It looks like {{currencyName}} has only recently been added to Blockrazor and
        its features have not yet been added. This is a great opportunity for you to
        add one of {{currencyName}}'s features and earn some Krazor!
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close">Thanks, don't show this again</button>
      </div>
    </div>
  </div>
</div>
{{featureModal}}

<div class="currencyDetailBox" >

  <div style="display:flex;width:100%;padding-bottom:10px">
          <div style="width:20%; float:left;">
      <button class="btn btn-primary showFlagged" style="margin-top:6px;">
        Hide
      </button>
    </div>  
    <div style="width:60%">
      <h5 class="text-center currencyDetailHeading featuresheading">Features</h5>
      <div id="addNewFeature" style="display:none;margin-bottom:10px;">
        <b>Rules:</b><br />
        <ul>
          <li>Use clear language, keep it as short as possible</li>
          <li>No jokes (people new to crypto will just be confused)</li>
          <li>Any claims must be factually correct</li>
        </ul>
        <textarea class="" id="featureName" style="width:100%" maxlength="140" minlength="6"></textarea><br />
        <div style="display:flex;"><button class="btn btn-primary float-left submitNewFeature">Submit</button>
          <h4>&nbsp;&nbsp;<i class="fa fa-question-circle help" aria-hidden="true"></i></h4>
          <div class="float-right" id="charNum" style="margin-left:50px;"></div>
        </div>
      </div>
    </div>


                  <div style="width:20%;float:right;">
      <button class="btn btn-primary pull-right showAddNewFeature" style="margin-top:6px;">
        <i class="fa fa-plus" aria-hidden="true"></i> Add feature
      </button>
            </div>

  </div>

    <div class="row commentThread">
    {{#unless reactiveVar 'showflagged'}}
      {{#if subsCacheReady}}
        {{#each features}}
          <div class="col-lg-6">{{> feature}}</div>
        {{else}}
          {{> empty}}
        {{/each}}
      {{else}}
        {{> loading}}
      {{/if}}
    {{/unless}}
    
    {{#if reactiveVar 'showflagged'}}
    {{#if subsCacheReady}}
    {{#each flaggedfeatures}}
      <div class="col-lg-6">{{> feature}}</div>
    {{else}}
      {{> empty}}
    {{/each}}
  {{else}}
    {{> loading}}
  {{/if}}
    {{/if}}
  </div>
</div>
</template>

<template name="feature">
<div class="card padBottom hoverCard">
    <div class="card-body">
        <span class="text-muted">{{featureName}}</span>
            <small class="text-muted"> - Posted by {{author}}</small>

        <br /><br />
        <div class="pull-left">
              {{#unless alreadyVoted _id}}
          <i class="fa fa-thumbs-down" aria-hidden="true"></i>
          <i class="fa fa-thumbs-up fa-flip-horizontal" aria-hidden="true"></i>
            {{else}}
          <i class="fa fa-check padRight" aria-hidden="true"></i><small>Voted</small>
            {{/unless}}
        </div>
        <small class="text-muted padLeft">{{relativeTime createdAt}}</small>
        <div class="pull-right"><i class="fa fa-flag flag" aria-hidden="true"></i><i id="comment_{{_id}}" class="fa fa-comments-o comments" aria-hidden="true" style="margin-left:10px;"><small>{{numComments}}</small></i></div>
    </div>
</div>


    <div class="input-group mb-3 newcomment-{{_id}}" style="display:none;">
  <input id="replyText-{{_id}}" type="text" class="form-control replyText" placeholder="Type a message here" aria-label="Type a message here" aria-describedby="basic-addon2" maxlength="140" minlength="6" data-toggle="popover" data-placement="top" data-content="Comments should be friendly, useful to others, and factually correct. If you see bad behavior, don't encourage it by replying, simply flag it and move on.">
  <div class="input-group-append">
    <button class="btn btn-primary submitNewComment" type="button"><i class="fa fa-envelope" aria-hidden="true"></i></button>
  </div>
</div>

  <div class="modal fade" id="flagModal-{{_id}}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">You are flagging</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
                 <p><b><i>"{{featureName}}"</i></b></p>
          Written by: {{author}}
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-danger flagButton">Report</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

  {{#if subsCacheReady}}
    {{#each comments}}
      {{> comment}}
    {{else}}
      {{> empty}}
    {{/each}}
  {{else}}
    {{> loading}}
  {{/if}}
</template>




<template name="comment">

    <div class="card padBottom commentParent-{{parentId}} pull-right rounded" style="background-color:#F5F5F7;display:none;width:80%">
        <div class="card-body">
            <span class="text-muted"><a href="/profile/{{author}}">{{author}}</a> {{comment}}</span>
            <br />
            <div class="pull-left card-link">
          {{#unless alreadyVotedOnComment parentId}}
          <i class="fa fa-thumbs-down" aria-hidden="true"></i>
          <i class="fa fa-thumbs-up fa-flip-horizontal" aria-hidden="true"></i>
            {{else}}
          <i class="fa fa-check padRight" aria-hidden="true"></i><small>Voted</small>
            {{/unless}}

                <small class="text-muted padLeft">{{relativeTime createdAt}}</small>
            </div>
            <div class="pull-right"><i class="fa fa-flag flag flagComment" aria-hidden="true"></i></div>
        </div>
    </div>
    <div class="modal fade" id="flagModal-{{_id}}" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">You are flagging:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p><b><i>"{{comment}}"</i></b></p>
                    Written by: {{author}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger commentFlag">Report</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</template>